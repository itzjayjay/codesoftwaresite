<!DOCTYPE html>
<html>

<head>

<title>Smart Text Editor</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEJQTFRFAAAA23yI1dXV0VdmzERVji87ycnJw8PDtz1M86xN8JQar6+viIiI7ogA1noApl8A5c+t3sGW2rqKKioqxKd8mIJgbs8VzwAAABZ0Uk5TAP///////////////////////////1SBjaMAAAA8SURBVHicY2DABxgZUflMzCysKHw2dg5kAU4udm4eFD4vHzqfn4p8AXS+oBAKn0FYSEQUxQfCwqh8dAAASZYC5vJ/xd8AAAAASUVORK5CYII=">

<style>
  * {
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    box-sizing: border-box;
  }
  body {
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    user-select: none;
  }
  body.resize {
    cursor: row-resize;
  }
  button {
    width: min(11vw, 75px);
    height: min(5vw, 20px);
    color: #aaaaaa;
    font-size: min(3.5vw, 14px);
    background: #3a3a3a;
    border: none;
    border-radius: min(1vw, 4px);
    box-shadow: 0 min(0.5vw, 2px) min(2vw, 8px) rgba(0,0,0,0.75);
    cursor: pointer;
    outline: none;
    transition: color 0.125s ease, background 0.125s ease, width 0s;
  }
  button:hover, #toolbar button:focus {
    color: #ffffff;
    background: #4a4a4a;
  }
  textarea {
    font-size: 13px;
    border: none;
    white-space: nowrap;
    resize: none;
    outline: none;
  }
  ::-webkit-scrollbar {
    width: min(3vw, 12px);
    height: min(3vw, 12px);
  }
  ::-webkit-scrollbar-track, #userInput::-webkit-scrollbar-corner {
    background: none;
  }
  ::-webkit-scrollbar-thumb {
    width: min(9vw, 36px);
    height: min(9vw, 36px);
    background-clip: content-box;
    background-color: #7a7a7a;
    border: min(0.5vw, 2px) solid transparent;
    border-radius: min(4vw, 16px);
  }
  #svg {
    position: absolute;
  }
  #header {
    padding: 0 min(1.5vw, 10px);
    position: relative;
    height: 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #171717;
    z-index: 2;
    transition: box-shadow 0.5s ease;
  }
  #header.default, #header.code, #header.split {
    box-shadow: 0 1px 8px rgba(0,0,0,0.75);
  }
  #header.preview {
    box-shadow: none;
  }
  #toolbar {
    display: flex;
  }
  #toolbar div, #replacer button {
    margin: 0 min(0.75vw, 6px);
  }
  #toolbar div:first-child, #replacer button:first-child {
    margin-left: 0;
  }
  #toolbar div:last-child, #replacer button:last-child {
    margin-right: 0;
  }
  #toolbar ul {
    position: absolute;
    min-width: min(35vw, 155px);
    background: #1c1c1c;
    border-radius: min(1vw, 4px);
    box-shadow: 0 min(0.5vw, 2px) min(1vw, 4px) rgba(0,0,0,0.75);
    z-index: 1;
    opacity: 0;
    pointer-events: none;
    list-style: none;
    transform: scaleY(0);
    transform-origin: top center;
    transition: opacity 0.125s ease, transform 0.125s ease;
  }
  #toolbar li {
    padding: min(1.75vw, 8px);
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: #cccccc;
    font-size: min(2.75vw, 12px);
    border-radius: min(1vw, 4px);
    cursor: pointer;
    transition: color 0.125s ease, background 0.125s ease;
  }
  #toolbar li span {
    margin-left: min(4vw, 16px);
    color: #777777;
    font-size: min(2.5vw, 11px);
  }
  #toolbar li svg {
    width: min(2.75vw, 12px);
    height: min(2.75vw, 12px);
    fill: #777777;
    transition: fill 0.125s ease;
  }
  #toolbar li input[type="file"], #toolbar li a {
    display: none;
  }
  #toolbar li:hover {
    color: #ffffff;
    background: #2c2c2c;
  }
  #toolbar li:hover > svg {
    fill: #ffffff;
  }
  #toolbar ul ul {
    position: absolute;
    left: 100%;
    top: 0;
    transform: scaleX(0);
    transform-origin: left center;
  }
  #toolbar button:focus + ul, #toolbar li:hover > ul {
    opacity: 1;
    pointer-events: all;
    transform: scale(1);
  }
  @media only screen and (max-height: 300px){
    #toolbar ul ul {
      min-width: 100%;
      max-height: min(14vw, 60px);
      left: 0;
      top: 100%;
      transform: scaleY(0);
      transform-origin: top center;
      overflow-y: auto;
    }
    #toolbar li svg {
      transform: rotate(90deg);
    }
  }
  #title {
    position: absolute;
    left: calc(50% - 75px);
    width: 150px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: left 0.5s ease;
  }
  #title svg {
    width: 24px;
    height: 24px;
  }
  #title section {
    color: #aaaaaa;
    font-size: 16px;
    white-space: nowrap;
    transform-origin: left center;
    transition: all 0.5s ease, left 0s;
  }
  #attribution {
    max-width: 35%;
    display: flex;
    text-align: right;
    transition: font-size 0.5s ease;
  }
  #attribution span, #attribution a {
    color: #aaaaaa;
    font-size: min(2vw, 14px);
    transition: color 0.125s ease;
  }
  #attribution a:hover {
    color: #ffffff;
  }
  #replacer {
    margin: min(1.5vw, 10px);
    padding: min(1.5vw, 10px);
    position: absolute;
    right: 0;
    top: 100%;
    max-height: calc(100vh - 60px);
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #171717;
    border-radius: min(1vw, 4px);
    box-shadow: 0 min(0.5vw, 2px) min(1vw, 4px) rgba(0,0,0,0.75);
    opacity: 0;
    pointer-events: none;
    transform: scaleY(0);
    transform-origin: top center;
    transition: opacity 0.25s ease, transform 0.25s ease;
  }
  #replacer div {
    display: flex;
  }
  #replacer div:nth-child(1) {
    margin-bottom: min(1.5vw, 10px);
    width: 100%;
    justify-content: center;
    align-items: center;
  }
  #replacer section {
    padding: 0 min(25vw, 70px);
    color: #aaaaaa;
    font-size: min(4vw, 16px);
  }
  #replacer svg {
    position: absolute;
    right: min(2.75vw, 12px);
    width: min(2.75vw, 12px);
    height: min(2.75vw, 12px);
    fill: #aaaaaa;
    cursor: pointer;
    transition: fill 0.125s ease;
  }
  #replacer svg:hover {
    fill: #ffffff;
  }
  #replacer div:nth-child(2) {
    width: 100%;
    flex-direction: column;
    align-items: center;
    overflow-y: auto;
  }
  #replacer textarea {
    margin-bottom: min(1.5vw, 10px);
    padding: 4px;
    width: 100%;
    height: min(8vw, 75px);
    flex-shrink: 0;
    color: #ffffff;
    background: #212121;
    border-radius: min(1vw, 4px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.75) inset;
  }
  #header.code > #replacer textarea, #header.split > #replacer textarea, #header.preview > #replacer textarea {
    font-family: monospace;
  }
  #replacer textarea:last-child {
    margin-bottom: 0;
  }
  #replacer div:nth-child(3) {
    margin-top: min(1.5vw, 10px);
  }
  #replacer button {
    width: min(15vw, 75px);
  }
  #replacer.active {
    opacity: 1;
    pointer-events: all;
    transform: scaleY(1);
  }
  @media only screen and (max-width: 900px){
    #title {
      left: calc(50% - 12px);
    }
    #title svg {
      margin: 0;
    }
    #title section {
      opacity: 0;
      transform: scaleX(0);
    }
  }
  #main {
    position: relative;
    flex: 1;
    background: #111111;
  }
  #userInput {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    border: 4px solid;
    transition: all 0.5s ease;
  }
  #userInput.default {
    height: 100%;
    color: #000000;
    background: #e5e2c9;
    border-color: #e5e2c9;
  }
  #userInput.code, #userInput.split, #userInput.preview {
    color: #ffffff;
    font-family: monospace;
    background: #1d1d1d;
    border-color: #1d1d1d;
  }
  #userInput.code {
    height: 100%;
  }
  #userInput.split {
    height: calc(50% - 8px);
  }
  #userInput.preview {
    height: 0;
    opacity: 0;
  }
  #userInput.drag {
    border-color: #0000ff;
    transition: all 0.25s ease;
  }
  #userInput.default.drag {
    color: #000080;
    background: #aaaaea;
  }
  #userInput.code.drag, #userInput.split.drag, #userInput.preview.drag {
    color: #7f7fff;
    background: #161656;
  }
  #slider {
    position: absolute;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #3a3a3a;
    box-shadow: 0 -1px 8px rgba(0,0,0,0.75);
    cursor: row-resize;
    transition: all 0.5s ease, background 0.125s ease;
  }
  #slider.default, #slider.code {
    top: 100%;
    height: 0;
    opacity: 0;
  }
  #slider.split {
    top: calc(50% - 8px);
    height: 16px;
  }
  #slider.preview {
    top: 0;
    height: 0;
    opacity: 0;
  }
  #slider div {
    padding: min(0.5vw, 2px);
    color: #aaaaaa;
    font-size: min(2.75vw, 12px);
    background: #3a3a3a;
    border-radius: min(1vw, 4px);
    box-shadow: 0 min(-0.25vw, -1px) min(2vw, 8px) rgba(0,0,0,0.75);
    opacity: 0;
    z-index: 1;
    transform: scaleY(0);
    transform-origin: center center;
    transition: color 0.125s ease, background 0.125s ease, opacity 0.125s ease, transform 0.125s ease;
  }
  #slider.active > div, #slider:hover > div {
    color: #ffffff;
    background: #4a4a4a;
    opacity: 1;
    transform: scaleY(1);
  }
  #slider.active, #slider:hover {
    background: #4a4a4a;
    transition: background 0.125s ease;
  }
  #preview {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    background: #ffffff;
    border: none;
    transition: all 0.5s ease;
  }
  #preview.default, #preview.code {
    height: 0;
    opacity: 0;
  }
  #preview.split {
    height: calc(50% - 8px);
  }
  #preview.preview {
    height: 100%;
  }
  #userInput.resize, #preview.resize {
    pointer-events: none;
    transition: none;
  }
  #menu {
    position: absolute;
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: space-around;
    pointer-events: none;
    z-index: 2;
    animation: menu 2s;
  }
  @keyframes menu {
    10%, 90% {
      backdrop-filter: blur(4px);
    }
  }
  #welcome {
    padding: 2vw;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-around;
    background: #101010;
    border-radius: 1vw;
    box-shadow: 0 0.25vw 0.25vw rgba(0,0,0,0.75);
    opacity: 0;
    animation: welcome 2s;
  }
  @keyframes welcome {
    0% {
      transform: scale(0.01);
    }
    15%, 85% {
      opacity: 1;
      transform: scale(1);
    }
    100% {
      transform: translateY(calc(50vh + 50%));
    }
  }
  #welcome div {
    margin-bottom: 1.75vw;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #welcome svg {
    margin: 0 0.5vw;
    width: 5vw;
    height: 5vw;
  }
  #welcome section {
    margin: 0 0.5vw;
    color: #ffffff;
    font-size: 3vw;
  }
  #welcome span {
    color: #aaaaaa;
    font-size: 1.5vw;
    text-align: center;
  }
  #menu.disabled, #welcome.disabled {
    animation: none;
  }
</style>

<svg id="svg">
  <symbol id="pencil" viewBox="0 0 512 512">
    <defs>
      <linearGradient id="wood" x1="-22.662" x2="-32.039" y1="-27.117" y2="-27.117" gradientTransform="matrix(-9.3466 -9.3775 9.3775 -9.3466 0 0)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#e5cfad" offset="0"/>
        <stop stop-color="#dec196" offset="0.25"/>
        <stop stop-color="#daba8a" offset="0.5"/>
        <stop stop-color="#c4a77c" offset="0.75"/>
        <stop stop-color="#988260" offset="1"/>
      </linearGradient>
      <linearGradient id="paint" x1="22.338" x2="31.811" y1="15.409" y2="15.409" gradientTransform="matrix(9.4412 9.4724 -9.4724 9.4412 0 0)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#f3ac4d" offset="0"/>
        <stop stop-color="#f0941a" offset="0.25"/>
        <stop stop-color="#ee8800" offset="0.5"/>
        <stop stop-color="#d67a00" offset="0.75"/>
        <stop stop-color="#a65f00" offset="1"/>
      </linearGradient>
      <linearGradient id="metal" x1="22.267" x2="31.751" y1="-8.6537" y2="-8.6537" gradientTransform="matrix(9.4527 9.484 -9.484 9.4527 0 0)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#d5d5d5" offset="0"/>
        <stop stop-color="#c9c9c9" offset="0.25"/>
        <stop stop-color="#c3c3c3" offset="0.5"/>
        <stop stop-color="#afafaf" offset="0.75"/>
        <stop stop-color="#888888" offset="1"/>
      </linearGradient>
      <linearGradient id="eraser" x1="22.164" x2="31.683" y1="-14.141" y2="-14.141" gradientTransform="matrix(9.4872 9.5187 -9.5187 9.4872 0 0)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#db7c88" offset="0"/>
        <stop stop-color="#d15766" offset="0.25"/>
        <stop stop-color="#cc4455" offset="0.5"/>
        <stop stop-color="#b73d4c" offset="0.75"/>
        <stop stop-color="#8e2f3b" offset="1"/>
      </linearGradient>
    </defs>
    <path d="m170.77 428.71-168.7 81.953 81.054-169.89z" fill="url(#wood)"/>
    <path d="m54.396 484.82-52.657 25.846 25.566-53.027z" fill="#2a2a2a"/>
    <path d="m314.47 108.52c-9.7304 9.7626 2.2127 37.574 26.676 62.118 24.463 24.544 52.182 36.527 61.913 26.764l-231.03 231.8c-9.7304 9.7626-37.45-2.2201-61.913-26.764-24.463-24.544-36.406-52.355-26.676-62.118z" fill="url(#paint)"/>
    <path d="m365.73 56.454c-9.827 9.8595 2.2347 37.947 26.94 62.734 24.706 24.788 52.7 36.889 62.527 27.03l-55.137 55.319c-9.827 9.8595-37.821-2.2421-62.527-27.03-24.706-24.788-36.767-52.875-26.94-62.734z" fill="url(#metal)"/>
    <path d="m417.17 4.7679c-9.8787 9.9114 2.2886 38.189 27.176 63.159 24.888 24.97 53.072 37.178 62.95 27.266l-54.165 54.344c-9.8787 9.9114-38.063-2.2962-62.95-27.266-24.888-24.97-37.055-53.247-27.176-63.159z" fill="url(#eraser)"/>
    <path d="m417.17 4.7679c9.8787-9.9114 38.063 2.2962 62.95 27.266 24.888 24.97 37.055 53.247 27.176 63.159s-38.062-2.2962-62.95-27.266c-24.888-24.97-37.055-53.247-27.176-63.159z" fill="#db7c88"/>
  </symbol>
  <symbol id="arrow" viewBox="0 0 512 512">
    <path d="m112.66 0 286.68 256-286.68 256z"/>
  </symbol>
  <symbol id="close" viewBox="0 0 512 512">
    <path d="m1.5795 65.78 64.201-64.201 190.22 190.22 190.22-190.22 64.201 64.201-190.22 190.22 190.22 190.22-64.201 64.201-190.22-190.22-190.22 190.22-64.201-64.201 190.22-190.22z"/>
  </symbol>
</svg>

</head>

<body>

<header id="header" class="default">
  <div id="toolbar">
    <div>
      <button>File</button>
      <ul>
        <li onmousedown="window.open(window.location.href,'_blank');">Create<span>Ctrl + Shift + C</span></li>
        <li onmousedown="load.click();"><input id="load" type="file">Load<span>Ctrl + Shift + L</span></li>
        <li onmousedown="saveAs();"><a id="save"></a>Save<span>Ctrl + Shift + S</span></li>
        <li>Save As...
          <svg><use href="#arrow"/></svg>
          <ul>
            <li onmousedown="saveAs('txt');">Plain Text<span>.txt</span></li>
            <li onmousedown="saveAs('html');">HTML<span>.html</span></li>
            <li onmousedown="saveAs('css');">CSS<span>.css</span></li>
            <li onmousedown="saveAs('js');">JavaScript<span>.js</span></li>
            <li onmousedown="saveAs('json');">JSON<span>.json</span></li>
            <li onmousedown="saveAs('svg');">SVG<span>.svg</span></li>
          </ul>
        </li>
      </ul>
    </div>
    <div>
      <button>View</button>
      <ul>
        <li onmousedown="changeView('default');">Default<span>Ctrl + Shift + 1</span></li>
        <li onmousedown="changeView('code');">Code<span>Ctrl + Shift + 2</span></li>
        <li onmousedown="changeView('split');">Split<span>Ctrl + Shift + 3</span></li>
        <li onmousedown="changeView('preview');">Preview<span>Ctrl + Shift + 4</span></li>
        <li onmousedown="openDisplay();">Display<span>Ctrl + Shift + 5</span></li>
      </ul>
    </div>
    <div>
      <button>Tools</button>
      <ul>
        <li onmousedown="replacer.classList.add('active');">Replace Text<span>Ctrl + Shift + F</span></li>
        <li onmousedown="importHTMLTemplate();">Import HTML Template<span>Ctrl + Shift + H</span></li>
        <li>Online Resources...
          <svg><use href="#arrow"/></svg>
          <ul>
            <li onmousedown="window.open('https://www.diffchecker.com/','_blank');">Difference Finder</li>
            <li onmousedown="window.open('https://htmlformatter.com/','_blank');">HTML Formatter</li>
            <li onmousedown="window.open('http://jsonviewer.stack.hu/','_blank');">JSON Formatter</li>
            <li onmousedown="window.open('https://www.svgminify.com/','_blank');">SVG Simplifier</li>
            <li onmousedown="window.open('https://cryptii.com/','_blank');">Text Encryptor</li>
            <li onmousedown="window.open('https://keycode.info/','_blank');">Keycode Finder</li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <div id="title">
    <svg><use href="#pencil"/></svg>
    <section>Smart Text Editor</section>
  </div>
  <div id="attribution">
    <span>Inspired by <a href="https://htmledit.squarefree.com/" target="_blank">Real-Time HTML Editor</a> and <a href="https://www.editpad.org/" target="_blank">Edit Pad</a>!</span>
  </div>
  <div id="replacer">
    <div>
      <section>Replace Text</section>
      <svg onmousedown="replacer.classList.remove('active');"><use href="#close"></use></svg>
    </div>
    <div>
      <textarea id="locate" placeholder="Text to locate..." spellcheck="false"></textarea>
      <textarea id="modify" placeholder="Replace with..." spellcheck="false"></textarea>
    </div>
    <div>
      <button onmousedown="activateReplacer();">Replace</button>
      <button onmousedown="flipReplacer();">Flip</button>
      <button onmousedown="clearReplacer();">Clear</button>
    </div>
  </div>
</header>

<main id="main">
  <textarea id="userInput" class="default" placeholder="Welcome to the Smart Text Editor! This site was created to allow for easy text editing and HTML development within your browser!" spellcheck="false"></textarea>
  <div id="slider" class="default">
    <div>▲<br>▼</div>
  </div>
  <iframe id="preview" class="default" src="about:blank"></iframe>
</main>

<div id="menu">
  <div id="welcome">
    <div>
      <svg><use href="#pencil"/></svg>
      <section>Smart Text Editor</section>
    </div>
    <span>Welcome to the Smart Text Editor!</span>
    <span>Created by Brandon Bennett</span>
  </div>
</div>

<script>
  var view = "default", loadedFile = null, sourceChange = 0, mustSave = 0;
  window.addEventListener("load",function(){
    if (window == window.parent){
      userInput.focus();
    } else {
      menu.classList.add("disabled");
      welcome.classList.add("disabled");
    }
  });
  window.addEventListener("beforeunload",function(event){
    if (window == window.parent && mustSave == 1){
      event.preventDefault();
      event.returnValue = "";
    }
  });
  window.addEventListener("keydown",function(event){
    if (event.ctrlKey){
      if (event.key == "C"){
        window.open(window.location.href,"_blank");
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "L"){
        load.click();
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "S"){
        saveAs();
      }
      if (event.key == "!"){
        changeView("default");
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "@"){
        changeView("code");
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "#"){
        changeView("split");
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "$"){
        changeView("preview");
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "%"){
        openDisplay();
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "F"){
        replacer.classList.toggle("active");
        event.preventDefault();
        event.stopPropagation();
      }
      if (event.key == "H"){
        importHTMLTemplate();
        event.preventDefault();
        event.stopPropagation();
      }
    }
  });
  window.addEventListener("resize",function(){
    if (view == "split"){
      changeView("split");
    }
  });
  document.documentElement.addEventListener("dragover",function(event){
    event.preventDefault();
    userInput.classList.add("drag");
    event.dataTransfer.dropEffect = "copy";
  });
  document.documentElement.addEventListener("dragleave",function(){
    userInput.classList.remove("drag");
  });
  document.documentElement.addEventListener("drop",function(event){
    event.preventDefault();
    userInput.classList.remove("drag");
    load.files = event.dataTransfer.files;
    importFile(event);
  });
  userInput.addEventListener("input",function(){
    if (sourceChange == 0){
      sourceChange = 1;
    }
    mustSave = 1;
    if ((view == "split") || (view == "preview")){
      previewRefresh();
    }
  });
  slider.addEventListener("mousedown",function(){
    toggleScaling();
    document.body.addEventListener("mousemove",setScaling);
    document.body.addEventListener("mouseup",removeScaling);
  });
  load.addEventListener("change",function(event){
    importFile(event);
  });
  function importFile(event){
    var reader = new FileReader(), validTypes = ["text","image","audio"], validSubtypes = ["plain","css","javascript","json","html","svg+xml"], mimeType = load.files[0].type;
    function mimeDivision(index){
      return mimeType.split("/")[index];
    }
    if ((mimeDivision(1) == validSubtypes[3]) || (mimeDivision(1) == validSubtypes[5])){
      mimeType = mimeType.replace(mimeDivision(0),validTypes[0]);
    }
    if (validTypes.includes(mimeDivision(0))){
      if (validTypes[0] == mimeDivision(0)){
        reader.readAsText(load.files[0],"UTF-8");
        reader.addEventListener("loadend",function(){
          userInput.value = reader.result;
          sourceChange = 1;
          previewRefresh();
        });
        loadedFile = load.files[0].name;
        if (validSubtypes[0] == mimeDivision(1)){
          changeView("default");
        }
        if (validSubtypes.slice(1,4).includes(mimeDivision(1))){
          changeView("code");
        }
        if (validSubtypes.slice(4,6).includes(mimeDivision(1))){
          changeView("split");
        }
      }
      if (validTypes.slice(1,3).includes(mimeDivision(0))){
        reader.readAsDataURL(load.files[0]);
        reader.addEventListener("loadend",function(){
          userInput.setRangeText(reader.result);
          sourceChange = 1;
          previewRefresh();
        });
      }
      mustSave = 0;
    } else {
      alert("Sorry, that file type isn't supported.");
    }
  }
  function saveAs(extension){
    var blob = new Blob([userInput.value], {type: "text/plain"});
    save.href = URL.createObjectURL(blob);
    if (extension == null){
      if (loadedFile != null){
        save.download = loadedFile;
      } else {
        save.download = "Untitled.txt";
      }
    } else {
      save.download = "Untitled." + extension;
    }
    save.click();
    loadedFile = save.download;
    mustSave = 0;
  }
  function changeView(newView){
    var elements = ["header","userInput","slider","preview"], count = 0;
    for (i = 0; i < elements.length; i++){
      changeClass(elements[count],newView);
      count += 1;
    }
    view = newView;
    previewRefresh();
  }
  function changeClass(element,newView){
    document.getElementById(element).classList.remove(view);
    document.getElementById(element).removeAttribute("style");
    document.getElementById(element).classList.add(newView);
  }
  function openDisplay(){
    var display = window.open();
    display.document.open();
    display.document.write(userInput.value);
    display.document.close();
  }
  function activateReplacer(){
    userInput.value = userInput.value.split(locate.value).join(modify.value);
  }
  function flipReplacer(){
    var temp = locate.value;
    locate.value = modify.value;
    modify.value = temp;
  }
  function clearReplacer(){
    locate.value = "";
    modify.value = "";
  }
  function importHTMLTemplate(){
    userInput.value = decodeURI("%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%0A%3Chead%3E%0A%0A%3Ctitle%3E%3C/title%3E%0A%3Cmeta%20charset=%22UTF-8%22%3E%0A%3Cmeta%20name=%22viewport%22%20content=%22width=device-width,%20initial-scale=1.0%22%3E%0A%3Clink%20rel=%22icon%22%20type=%22%22%20href=%22%22%3E%0A%0A%3Cstyle%3E%0A%20%20*%20%7B%0A%20%20%20%20margin:%200;%0A%20%20%20%20padding:%200;%0A%20%20%20%20font-family:%20sans-serif;%0A%20%20%20%20box-sizing:%20border-box;%0A%20%20%7D%0A%20%20body%20%7B%0A%20%20%20%20width:%20100vw;%0A%20%20%20%20height:%20100vh;%0A%20%20%7D%0A%3C/style%3E%0A%0A%3C/head%3E%0A%0A%3Cbody%3E%0A%0A%3Cscript%3E%0A%3C/script%3E%0A%0A%3C/body%3E%0A%0A%3C/html%3E");
    changeView("split");
  }
  function previewRefresh(){
    if (sourceChange == 1){
      preview.src = "about:blank";
      preview.contentWindow.document.open();
      preview.contentWindow.document.write(userInput.value);
      preview.contentWindow.document.close();
      sourceChange = 0;
    }
  }
  function toggleScaling(){
    document.body.classList.toggle("resize");
    userInput.classList.toggle("resize");
    slider.classList.toggle("active");
    preview.classList.toggle("resize");
  }
  function setScaling(event){
    var offset = event.clientY - 40;
    if (offset <= 80){
      offset = 80;
    }
    if (offset >= window.innerHeight - 120){
      offset = window.innerHeight - 120;
    }
    userInput.style.height = "calc(" + offset + "px - 8px)";
    slider.style.top = "calc(" + offset + "px - 8px)";
    preview.style.height = "calc(100% - " + offset + "px - 8px)";
  }
  function removeScaling(event){
    document.body.removeEventListener("mousemove",setScaling);
    document.body.removeEventListener("mouseup",removeScaling);
    toggleScaling();
  }
</script>

</body>

</html>